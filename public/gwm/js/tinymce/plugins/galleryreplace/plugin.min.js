!function(){var e={},n=function(n){for(var l=e[n],r=l.deps,a=l.defn,o=r.length,i=new Array(o),c=0;c<o;++c)i[c]=t(r[c]);var s=a.apply(null,i);if(void 0===s)throw"module ["+n+"] returned undefined";l.instance=s},l=function(n,l,t){if("string"!=typeof n)throw"module id must be a string";if(void 0===l)throw"no dependencies for "+n;if(void 0===t)throw"no definition function for "+n;e[n]={deps:l,defn:t,instance:void 0}},t=function(l){var t=e[l];if(void 0===t)throw"module ["+l+"] was undefined";return void 0===t.instance&&n(l),t.instance},r=function(e,n){for(var l=e.length,r=new Array(l),a=0;a<l;++a)r.push(t(e[a]));n.apply(null,n)};({}).bolt={module:{api:{define:l,require:r,demand:t}}};var a=l;!function(e,n){a(e,[],function(){return n})}("global!tinymce.util.Tools.resolve",tinymce.util.Tools.resolve),a("tinymce.core.PluginManager",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.PluginManager")}),a("tinymce.core.Env",["global!tinymce.util.Tools.resolve"],function(e){return e("tinymce.Env")}),a("tinymce.plugins.galleryreplace.Plugin",["tinymce.core.PluginManager","tinymce.core.Env"],function(e,n){return e.add("galleryreplace",function(e){var l=e.getParam("galleryreplace_separator","\x3c!-- galleryreplace --\x3e"),t=new RegExp(l.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(e){return"\\"+e}),"gi"),r='<img src="'+n.transparentSrc+'" class="mce-galleryreplace" data-mce-resize="false" data-mce-placeholder />';e.addCommand("mceGalleryReplace",function(){e.settings.galleryreplace_split_block?e.insertContent("<p>"+r+"</p>"):e.insertContent(r)}),e.addButton("galleryreplace",{title:"Galeria de fotos",cmd:"mceGalleryReplace"}),e.addMenuItem("galleryreplace",{text:"Galeria de fotos",icon:"galleryreplace",cmd:"mceGalleryReplace",context:"insert"}),e.on("ResolveName",function(n){"IMG"==n.target.nodeName&&e.dom.hasClass(n.target,"mce-galleryreplace")&&(n.name="galleryreplace")}),e.on("click",function(n){"IMG"===(n=n.target).nodeName&&e.dom.hasClass(n,"mce-galleryreplace")&&e.selection.select(n)}),e.on("BeforeSetContent",function(e){e.content=e.content.replace(t,r)}),e.on("PreInit",function(){e.serializer.addNodeFilter("img",function(n){for(var t,r,a=n.length;a--;)if(t=n[a],(r=t.attr("class"))&&-1!==r.indexOf("mce-galleryreplace")){var o=t.parent;if(e.schema.getBlockElements()[o.name]&&e.settings.galleryreplace_split_block){o.type=3,o.value=l,o.raw=!0,t.remove();continue}t.type=3,t.value=l,t.parent.attr("class","galleryreplace"),t.raw=!0}})})}),function(){}}),t("tinymce.plugins.galleryreplace.Plugin")()}();