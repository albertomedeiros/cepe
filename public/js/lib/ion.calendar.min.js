function getDiarios(){return $.ajax({type:"GET",url:$("#form-calendario").attr("action")+"get_diaries",async:!1}).responseText}if($("#form-calendario").length>0)var diarios=getDiarios();!function(t){try{var a=moment()}catch(e){throw alert("Can't find Moment.js, please read the ion.calendar description."),new Error("Can't find Moment.js library")}var n={init:function(e){var n,o,i=t.extend({lang:"pt",sundayFirst:!0,years:"80",format:"",clickable:!0,startDate:"",onClick:null},e);return this.each(function(){var e=t(this);if(!e.data("isActive")){e.data("isActive",!0);var r,s,c,d,f,l,m,p,_,u,y,Y,h,v=moment(a.locale(i.lang));this.updateData=function(a){i=t.extend(i,a),g()};var g=function(){r.off(),s.off(),c.off(),d.off(),e.empty(),D(),M()},D=function(){i.startDate&&(l=i.format.indexOf("L")>=0?moment(i.startDate,"YYYY.MM.DD").locale(i.lang):moment(i.startDate,i.format).locale(i.lang)),i.years=i.years.toString(),y=i.years.split("-"),1===y.length?(Y=moment().subtract("years",y[0]).format("YYYY"),h=moment().format("YYYY")):2===y.length&&(Y=y[0],h=y[1]),Y=parseInt(Y),h=parseInt(h),h<v.format("YYYY")&&v.year(h).month(11),Y>v.format("YYYY")&&v.year(Y).month(0)},M=function(){for(m=moment(v),items=diarios.split("&"),ano=0,mes=0,p=parseInt(m.startOf("month").format("d")),_=parseInt(m.endOf("month").format("d")),u=parseInt(m.endOf("month").format("D")),n='<div class="ic__container">',n+='<div class="ic__header">',n+='<div class="ic__prev"><div></div></div>',n+='<div class="ic__next"><div></div></div>',n+='<div class="ic__month"><select class="ic__month-select">',o=0;o<12;o++)o===parseInt(v.format("M"))-1?(n+='<option value="'+o+'" selected="selected">'+m.month(o).format("MMMM")+"</option>",mes=o+1):n+='<option value="'+o+'">'+m.month(o).format("MMMM")+"</option>";for(n+="</select></div>",n+='<div class="ic__year"><select class="ic__year-select">',o=Y;o<=h;o++)o===parseInt(v.format("YYYY"))?(n+='<option value="'+o+'" selected="selected">'+o+"</option>",ano=o):n+='<option value="'+o+'">'+o+"</option>";if(n+="</select></div>",n+="</div>",i.sundayFirst){for(n+='<table class="ic__week-head"><tr>',o=0;o<7;o++)n+="<td>"+m.day(o).format("dd")+"</td>";for(n+="</tr></table>",n+='<table class="ic__days"><tr>',o=0;o<p;o++)n+='<td class="ic__day-empty">&nbsp;</td>';for(o=1;o<=u;o++){if(moment(v).date(o).format("D.M.YYYY")===a.format("D.M.YYYY"))n+='<td class="ic__day ic__day_state_current">'+o+"</td>";else if(l&&moment(v).date(o).format("D.M.YYYY")===l.format("D.M.YYYY"))n+='<td class="ic__day ic__day_state_selected">'+o+"</td>";else{mes<10?o<10?data_amiga="0"+o.toString()+"0"+mes.toString()+ano.toString():data_amiga=o.toString()+"0"+mes.toString()+ano.toString():o<10?data_amiga="0"+o.toString()+mes.toString()+ano.toString():data_amiga=o.toString()+mes.toString()+ano.toString();var t=!1;for(item in items)items[item]==data_amiga&&(t=!0);n+=t?'<td class="ic__day has_diary">'+o+"</td>":'<td class="ic__day">'+o+"</td>"}(p+o)/7===Math.floor((p+o)/7)&&(n+="</tr><tr>")}for(o=_;o<6;o++)n+='<td class="ic__day-empty">&nbsp;</td>';n+="</tr></table>"}else{for(n+='<table class="ic__week-head"><tr>',o=1;o<8;o++)n+=o<7?"<td>"+m.day(o).format("dd")+"</td>":"<td>"+m.day(0).format("dd")+"</td>";for(n+="</tr></table>",n+='<table class="ic__days"><tr>',p>0?p-=1:p=6,o=0;o<p;o++)n+='<td class="ic__day-empty">&nbsp;</td>';for(o=1;o<=u;o++)n+=moment(v).date(o).format("D.M.YYYY")===a.format("D.M.YYYY")?'<td class="ic__day ic__day_state_current">'+o+"</td>":l&&moment(v).date(o).format("D.M.YYYY")===l.format("D.M.YYYY")?'<td class="ic__day ic__day_state_selected">'+o+"</td>":'<td class="ic__day">'+o+"</td>",(p+o)/7===Math.floor((p+o)/7)&&(n+="</tr><tr>");for(_<1&&(_=7),o=_-1;o<6;o++)n+='<td class="ic__day-empty">&nbsp;</td>';n+="</tr></table>"}n+="</div>",b()},b=function(){e.html(n),r=e.find(".ic__prev"),s=e.find(".ic__next"),c=e.find(".ic__month-select"),d=e.find(".ic__year-select"),f=e.find(".ic__day"),r.on("click",function(t){t.preventDefault(),v.subtract("months",1),parseInt(v.format("YYYY"))<Y&&v.add("months",1),g()}),s.on("click",function(t){t.preventDefault(),v.add("months",1),parseInt(v.format("YYYY"))>h&&v.subtract("months",1),g()}),c.on("change",function(a){a.preventDefault();var e=t(this).prop("value");v.month(parseInt(e)),g()}),d.on("change",function(a){a.preventDefault();var e=t(this).prop("value");v.year(parseInt(e)),g()}),i.clickable&&f.on("click",function(a){a.preventDefault();var e=t(this).text();v.date(parseInt(e)),l=moment(v),i.format.indexOf("L")>=0?i.startDate=l.format("YYYY-MM-DD"):i.startDate=l.format(i.format),"function"==typeof i.onClick&&(i.format?"moment"===i.format?i.onClick.call(this,l):i.onClick.call(this,l.format(i.format)):i.onClick.call(this,l.format())),g()})};D(),M()}})},update:function(t){return this.each(function(){this.updateData(t)})}};t.fn.ionCalendar=function(a){return n[a]?n[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void t.error("Method "+a+" does not exist for jQuery.ionCalendar"):n.init.apply(this,arguments)}}(jQuery),function(t){var a,e=0,n=t(document.body),o=function(){t(".ic__datepicker").css("left","-9999px").css("top","-9999px")},i={init:function(i){var r=t.extend({lang:"en",sundayFirst:!0,years:"80",clickable:!0,format:""},i);return this.each(function(){var i,s,c,d,f,l,m,p=t(this),_={},u=this;if(!p.data("isActive")){p.data("isActive",!0),e++,this.pluginCount=e,_.lang=p.data("lang")||r.lang,p.data("sundayfirst")===!1&&(_.sundayFirst=p.data("sundayfirst")),_.years=p.data("years")||r.years,_.format=p.data("format")||r.format,t.extend(r,_),n.on("mousedown",function(){o()}),r.onClick=function(t){p.prop("value",t),f=t,o()};var y=function(){a='<div class="ic__datepicker" id="ic__datepicker-'+u.pluginCount+'"></div>',n.append(a),i=t("#ic__datepicker-"+u.pluginCount),i.ionCalendar(r),i.on("mousedown",function(t){t.stopPropagation()}),p.on("mousedown",function(t){t.stopPropagation()}),p.on("focusin",function(){o(),Y()}),p.on("keyup",function(){Y()})},Y=function(){s=parseInt(p.offset().left),c=parseInt(p.offset().top),d=parseInt(p.outerWidth(!0)),i.css("left",s+d+10+"px").css("top",c-10+"px"),l=p.prop("value"),l&&l!==f&&r.format.indexOf("L")<0&&(m=moment(l,r.format),m.isValid()&&i.ionCalendar("update",{startDate:l}))};y()}})},close:function(){o()}};t.fn.ionDatePicker=function(a){return i[a]?i[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?void t.error("Method "+a+" does not exist for jQuery.ionDatePicker"):i.init.apply(this,arguments)}}(jQuery);